CREATE DATABASE db_project;
use db_project;
DROP TABLE ADRESSE;
drop table Personne;
drop table Bien_immobilier;
drop table Garage;
drop table Transaction;
drop table Visite;
create table Adresse(id_adresse int PRIMARY KEY NOT NULL auto_increment,
					rue varchar(55),
					ville varchar(55),
					code_postal int);

create table Personne(
		id_personne int PRIMARY KEY NOT NULL auto_increment,
		nom varchar(15),
		prenom varchar(30)
	);

create table Bien_immobilier(id_bien int PRIMARY KEY NOT NULL auto_increment,
							 disponibilite boolean,
							 nb_piece int,
							 superficie int,
							 prix_vente int,
							 date_disponibilite date,
							 etat ENUM ('neuf', 'bon état', 'très bon état', 'mauvais état'),
							 type_bien ENUM ('maison', 'appartement'),
							 id_adresse int,
							 id_proprietaire int,
							 foreign key(id_adresse) references Adresse(id_adresse) on delete cascade on update cascade,
							 foreign key(id_proprietaire) references Personne(id_personne) on delete cascade on update cascade		 
);
create table Garage(num int PRIMARY KEY NOT NULL auto_increment,
					id_adresse int ,
					id_bien_immobilier int,
					foreign key(id_adresse) references Adresse(id_adresse) on delete cascade on update cascade,
					foreign key(id_bien_immobilier) references Bien_immobilier(id_bien) on delete cascade on update cascade		 
);

create table Transaction(commission int,
						 prix_vente int,
						 date_transac date,
						 id_client int,
						 id_propriétaire int, 
						 foreign key(id_client) references Personne(id_personne) on delete cascade on update cascade,
						 foreign key(id_propriétaire) references Personne(id_personne) on delete cascade on update cascade	
);
create table Visite(date_visite date,
					id_client int,
					foreign key(id_client) references Personne(id_personne) on delete cascade on update cascade
				   );